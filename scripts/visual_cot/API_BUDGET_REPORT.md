# API预算报告 - GPT-3.5-Turbo-1106 测评

## 一、预算概述
本报告为视觉CoT任务的GPT-3.5-Turbo-1106 API调用提供预算估算，包含：
- MME、MMB、MMVet、LLaVAW四大标准数据集
- Viscot Benchmark本地测试数据集（benchmark目录）
- 多次实验需求
- 合理的安全系数

---

## 二、API定价（OpenAI官方）
**模型**: gpt-3.5-turbo-1106  
**输入token**: $0.15 / 1M tokens  
**输出token**: $0.20 / 1M tokens  
**有效价格**: ≈ $0.35 / 1M tokens（保守合并估算）

---

## 三、数据集估算
### 1. 单数据集条目数
基于benchmark目录下现有JSON文件平均规模估算，其中Viscot Benchmark为实际统计结果：

| 数据集 | 预估/统计条目数 |
| ------ | --------------- |
| MME    | 1,000（预估） |
| MMB    | 10,000（预估） |
| MMVet  | 8,000（预估） |
| LLaVAW | 12,000（预估） |
| **Viscot Benchmark** | **8,281（实际统计）** |
| **合计** | **39,281**  |

### 2. 单API请求token数
根据脚本使用的提示模板和数据结构，单请求平均token数：
- 系统提示（BASE_PROMPT）: ~50 tokens
- 问题文本: ~100 tokens
- 标准答案（GT）: ~100 tokens
- 模型输出: ~50 tokens
- **单请求合计**: ~300 tokens

---

## 四、多实验倍数计算
### 1. 实验次数
- 基础实验: 1次
- 变体实验: 2次（例如：不同模型、不同prompt）
- 验证实验: 1次（重复验证关键结果）
- **合计倍数**: 4倍

### 2. 安全系数
考虑数据量波动、长文本情况、重试机制等，设置**2倍安全系数**

---

## 五、总预算计算
### 1. 总token数估算
```
总条目数 × 单请求token数 × 实验倍数 × 安全系数
39,281 × 300 × 4 × 2 = 94,274,400 tokens
```

### 2. 费用计算
```
94.27M tokens × $0.35/M = $32.99
```

### 3. 分阶段预算
| 阶段 | 估算费用 | 说明 |
| ---- | -------- | ---- |
| 基础实验 | $8.25 | 单实验基础费用 |
| 变体实验 | $16.49 | 2次变体实验 |
| 验证实验 | $8.25 | 1次验证实验 |
| **合计** | **$32.99** | 含2倍安全系数 |

---

## 六、优化建议
1. **分批实验**: 先小范围测试（10%数据）验证效果后再全量运行
2. **token压缩**: 简化问题和答案的表述（如移除冗余信息）
3. **重试机制**: 限制最大重试次数（当前为5次）以减少无效请求
4. **模型选择**: 若预算有限，可考虑使用更便宜的gpt-3.5-turbo-0125模型

---

**报告生成时间**: 2025年11月14日  
**适用范围**: visual_cot模块所有GPT-3.5-Turbo-1106 API调用

---

## 七、附录：Viscot Benchmark条目数明细
根据实际统计，benchmark目录下各JSON文件条目数如下：

| 文件名 | 条目数 |
| ------ | ------ |
| gqa.json | 978 |
| openimages.json | 945 |
| textvqa.json | 526 |
| vsr.json | 404 |
| dude.json | 603 |
| textcap.json | 853 |
| cub.json | 492 |
| docvqa.json | 888 |
| infographicsvqa.json | 360 |
| sroie.json | 686 |
| flickr30k.json | 1546 |
| **合计** | **8281** |
